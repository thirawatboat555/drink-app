<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>‡∏£‡πâ‡∏≤‡∏ô‡∏£‡∏¥‡∏°‡∏ó‡∏∏‡πà‡∏á</title>

<style>
*{box-sizing:border-box}
body{
margin:0;
font-family:sans-serif;
background:#f2f2f2;
padding-top:95px;
padding-bottom:110px;
}

.header{
position:fixed;
top:0;
left:0;
right:0;
z-index:1000;
background:linear-gradient(135deg,#43a047,#8bc34a);
color:white;
text-align:center;
padding:16px;
box-shadow:0 4px 8px rgba(0,0,0,.3);
}

.card{
background:white;
margin:12px;
border-radius:16px;
overflow:hidden;
box-shadow:0 3px 6px rgba(0,0,0,.15);
}

.menu{
display:flex;
align-items:center;
padding:12px;
cursor:pointer;
}

.menu img{
width:70px;
height:70px;
border-radius:12px;
object-fit:cover;
}

.menu div{margin-left:12px}

.panel{
display:none;
padding:12px;
border-top:1px solid #ddd;
}

.block{
border:1px solid #aaa;
padding:8px 14px;
border-radius:20px;
margin:5px;
display:inline-block;
cursor:pointer;
}

.block.active{
background:#4CAF50;
color:white;
border-color:#4CAF50;
}

.block.disabled{
opacity:.4;
pointer-events:none;
}

button{
width:100%;
padding:14px;
border:none;
border-radius:14px;
background:#2196F3;
color:white;
font-size:16px;
margin-top:12px;
}

/* ===== CART BAR (‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô 20%) ===== */
.cart-bar{
position:fixed;
bottom:0;
left:0;
right:0;
background:black;
color:white;
text-align:center;
padding:18px;
font-size:22px;
z-index:1000;
cursor:pointer;
}

/* ===== CART PANEL ===== */
.cart-panel{
position:fixed;
bottom:-100%;
left:0;
right:0;
background:white;
border-radius:20px 20px 0 0;
padding:16px;
max-height:70vh;
overflow:auto;
transition:.3s;
z-index:2000;
}

.cart-panel.show{bottom:0}

.cart-item{
border-bottom:1px solid #ddd;
padding:10px 0;
}

.controls{
display:flex;
gap:10px;
margin-top:6px;
}

.controls button{
padding:6px 12px;
font-size:16px;
background:#4CAF50;
border-radius:10px;
}

.total{
font-size:20px;
font-weight:bold;
margin-top:12px;
text-align:right;
}
</style>
</head>

<body>

<div class="header">
<h2>‡∏£‡πâ‡∏≤‡∏ô‡∏£‡∏¥‡∏°‡∏ó‡∏∏‡πà‡∏á</h2>
<small>‡∏™‡∏î‡∏ä‡∏∑‡πà‡∏ô‡∏ó‡∏∏‡∏Å‡πÅ‡∏Å‡πâ‡∏ß</small>
</div>

<div id="list"></div>

<div class="cart-bar" onclick="toggleCart()">
üß∫ ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ (<span id="count">0</span>)
</div>

<div class="cart-panel" id="cartPanel"></div>

<script>
const menus=[
["‡∏ä‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß",25],["‡∏ä‡∏≤‡πÑ‡∏ó‡∏¢",25],["‡πÇ‡∏≠‡∏£‡∏¥‡πÇ‡∏≠‡πâ‡∏ô‡∏°‡∏™‡∏î‡∏õ‡∏±‡πà‡∏ô",30],
["‡πÇ‡∏Å‡πÇ‡∏Å‡πâ",25],["‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß",25],["‡∏™‡∏ï‡∏≠‡πÄ‡∏ö‡∏≠‡∏£‡∏µ‡πà",25]
];

const sweets=[
"0% ‡πÑ‡∏°‡πà‡∏´‡∏ß‡∏≤‡∏ô","25% ‡∏´‡∏ß‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢","50% ‡∏´‡∏ß‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á",
"75% ‡∏´‡∏ß‡∏≤‡∏ô‡∏Ñ‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ß‡∏≤‡∏ô","100% ‡∏´‡∏ß‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥","125% ‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏≤‡∏Å"
];

let cart=[];
const list=document.getElementById("list");

menus.forEach(m=>{
const oreo=m[0]==="‡πÇ‡∏≠‡∏£‡∏¥‡πÇ‡∏≠‡πâ‡∏ô‡∏°‡∏™‡∏î‡∏õ‡∏±‡πà‡∏ô";

list.innerHTML+=`
<div class="card">
<div class="menu" onclick="toggleMenu(this)">
<img src="https://picsum.photos/200?${Math.random()}">
<div><b>${m[0]}</b><br>${m[1]} ‡∏ö‡∏≤‡∏ó</div>
</div>

<div class="panel">
<b>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏ô</b><br>
${sweets.map(s=>`<span class="block sweet" onclick="pick(this,'sweet')">${s}</span>`).join("")}

<br><br><b>‡∏ä‡∏ô‡∏¥‡∏î</b><br>
<span class="block type" onclick="pick(this,'type')">‡πÄ‡∏¢‡πá‡∏ô</span>
<span class="block type ${oreo?'disabled':''}" onclick="pick(this,'type')">‡πÅ‡∏¢‡∏Å‡∏ô‡πâ‡∏≥</span>
<span class="block type ${oreo?'disabled':''}" onclick="pick(this,'type')">‡∏õ‡∏±‡πà‡∏ô +5</span>

<button onclick="addItem(this,'${m[0]}',${m[1]})">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
</div>
</div>`;
});

function reset(p){
p.querySelectorAll(".block").forEach(b=>{
if(!b.classList.contains("disabled")) b.classList.remove("active");
});
}

function toggleMenu(menu){
document.querySelectorAll(".panel").forEach(p=>{
if(p!==menu.nextElementSibling){
reset(p);
p.style.display="none";
}
});
const panel=menu.nextElementSibling;
panel.style.display=panel.style.display==="block"?"none":"block";

const h=document.querySelector(".header").offsetHeight;
const y=menu.getBoundingClientRect().top+scrollY-h-10;
scrollTo({top:y,behavior:"smooth"});
}

function pick(el,type){
if(el.classList.contains("disabled")) return;
const panel=el.closest(".panel");

if(el.classList.contains("active")){
el.classList.remove("active");
return;
}

panel.querySelectorAll("."+type).forEach(b=>b.classList.remove("active"));
el.classList.add("active");
}

function addItem(btn,name,price){
const panel=btn.parentElement;
const sweet=panel.querySelector(".sweet.active");
const type=panel.querySelector(".type.active");

if(!sweet||!type) return alert("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏Å‡πà‡∏≠‡∏ô");

let extra=type.innerText.includes("‡∏õ‡∏±‡πà‡∏ô")?5:0;

const key=name+sweet.innerText+type.innerText;
const found=cart.find(i=>i.key===key);

if(found) found.qty++;
else cart.push({key,name,sweet:sweet.innerText,type:type.innerText,price:price+extra,qty:1});

reset(panel);
panel.style.display="none";
renderCart();
}

function toggleCart(){
document.getElementById("cartPanel").classList.toggle("show");
renderCart();
}

function renderCart(){
const box=document.getElementById("cartPanel");
let sum=0;
box.innerHTML="";

cart.forEach((i,idx)=>{
sum+=i.price*i.qty;

box.innerHTML+=`
<div class="cart-item">
<b>${i.name}</b><br>
${i.sweet} | ${i.type}<br>
${i.price}‡∏ø x ${i.qty}

<div class="controls">
<button onclick="plus(${idx})">+</button>
<button onclick="minus(${idx})">-</button>
<button onclick="removeItem(${idx})">‡∏•‡∏ö</button>
</div>
</div>`;
});

box.innerHTML+=`<div class="total">‡∏£‡∏ß‡∏° ${sum} ‡∏ö‡∏≤‡∏ó</div>`;
document.getElementById("count").innerText=cart.reduce((a,b)=>a+b.qty,0);
}

function plus(i){cart[i].qty++;renderCart();}
function minus(i){
if(cart[i].qty>1) cart[i].qty--;
else cart.splice(i,1);
renderCart();
}
function removeItem(i){cart.splice(i,1);renderCart();}
</script>

</body>
</html>
